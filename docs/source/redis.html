

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Redis Help &mdash; perls2 1.0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Using the Rethink Sawyer Arm" href="sawyer_instructions.html" />
    <link rel="prev" title="Using the Franka Panda" href="panda_instructions.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> perls2
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="panda_setup.html">Franka Panda Setup</a></li>
</ul>
<p class="caption"><span class="caption-text">Modules</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="environments.html">Environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="worlds.html">World</a></li>
<li class="toctree-l1"><a class="reference internal" href="robot_interfaces.html">RobotInterfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="controller_eqns.html">Controllers</a></li>
</ul>
<p class="caption"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../simple_reach.html">Simple Reach Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="load_objects.html">Examples: Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="switch_sim_real.html">Switching between Real and Sim Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="project_template.html">Project Template</a></li>
</ul>
<p class="caption"><span class="caption-text">API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../env.html">Environment (Env)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../world.html">World</a></li>
<li class="toctree-l1"><a class="reference internal" href="../robot_interface.html">Robot Interfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="../controller.html">Controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="../object_interface.html">Object Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../camera_interface.html">Camera Interface</a></li>
</ul>
<p class="caption"><span class="caption-text">Real Robot Control</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="panda_setup.html">Franka Panda Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="panda_nuc_setup.html">Set up NUC (Control PC) for the Franka Panda</a></li>
<li class="toctree-l1"><a class="reference internal" href="panda_ws_setup.html">Set up workstation for Franka Panda</a></li>
<li class="toctree-l1"><a class="reference internal" href="panda_instructions.html">Using the Franka Panda</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Redis Help</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#redis">Redis</a></li>
<li class="toctree-l2"><a class="reference internal" href="#install-redis">Install redis</a></li>
<li class="toctree-l2"><a class="reference internal" href="#start-redis-server">Start redis-server</a></li>
<li class="toctree-l2"><a class="reference internal" href="#securing-redis">Securing redis</a></li>
<li class="toctree-l2"><a class="reference internal" href="#redis-cli">redis-cli</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#redis-cli-commands">redis-cli commands</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#troubleshooting">Troubleshooting:</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#kill-a-persistent-redis-server">Kill a persistent redis-server</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="sawyer_instructions.html">Using the Rethink Sawyer Arm</a></li>
<li class="toctree-l1"><a class="reference internal" href="demos.html">Controller Demos</a></li>
</ul>
<p class="caption"><span class="caption-text">Real Cameras</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="real_cameras.html">perls2 with Real Cameras</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">perls2</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Redis Help</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/source/redis.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="redis-help">
<h1>Redis Help<a class="headerlink" href="#redis-help" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>perls2 uses redis for interprocess communication and retreiving data from real robots and sensors with different software requirements, as well as communication between machines for real robot control. This page lists a number of tips for working with redis.</p>
</div>
<div class="section" id="redis">
<h2>Redis<a class="headerlink" href="#redis" title="Permalink to this headline">¶</a></h2>
<p>“Redis is an open source (BSD licensed), in-memory data structure store, used as a database, cache, and message broker. Redis provides data structures such as strings, hashes, lists, sets, sorted sets with range queries, bitmaps, hyperloglogs, geospatial indexes, and streams.”</p>
<p>For more information see: https://redis.io/</p>
<p>For real robot control, processes communicate by writing or reading the value of specific redis keys. These keys contain information about control parameters, robot commands, and robot state.</p>
</div>
<div class="section" id="install-redis">
<h2>Install redis<a class="headerlink" href="#install-redis" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">redis</span><span class="o">-</span><span class="n">server</span>
</pre></div>
</div>
</div>
<div class="section" id="start-redis-server">
<h2>Start redis-server<a class="headerlink" href="#start-redis-server" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">redis</span><span class="o">-</span><span class="n">server</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">redis</span><span class="o">.</span><span class="n">conf</span>
</pre></div>
</div>
<p>You can run an unsecured server using <code class="docutils literal notranslate"><span class="pre">redis-server</span></code>, but be aware that this is unsecured and will not work with perls2.</p>
</div>
<div class="section" id="securing-redis">
<h2>Securing redis<a class="headerlink" href="#securing-redis" title="Permalink to this headline">¶</a></h2>
<p>An unsecured redis-server can lead to a number of <a class="reference external" href="https://redis.io/topics/security">vulnerabilities</a>, which are especially important when performing real robot control. To secure the server, we modify the redis.conf found in the perls2/redis_interfaces directory.</p>
<ol>
<li><p>Copy the perls2/redis_interfaces/redis.conf to another directory. This conf file contains the password, so it’s not a good idea to have it in a github repo or anywhere online.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cp</span> <span class="o">~/</span><span class="n">perls2</span><span class="o">/</span><span class="n">redis_interfaces</span><span class="o">/</span><span class="n">redis</span><span class="o">.</span><span class="n">conf</span> <span class="o">~/</span><span class="n">home</span><span class="o">/</span><span class="n">user</span><span class="o">/.</span><span class="n">hidden</span><span class="o">/</span>
</pre></div>
</div>
</li>
<li><p>Change the following line in the conf file you just copied over</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">requirepass</span> <span class="n">foobared</span>
</pre></div>
</div>
<p>to</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">requirepass</span> <span class="n">your</span><span class="o">-</span><span class="nb">super</span><span class="o">-</span><span class="n">long</span><span class="o">-</span><span class="n">password</span>
</pre></div>
</div>
</li>
<li><p>In the hidden directory, make  text file containing the password you’ve just added to the conf file. perls2 will use this to connect to redis.</p></li>
<li><p>Follow the instructions specific to the machine and robot you’re working with for linking perls2 to your redis passfile.</p></li>
</ol>
<p><a class="reference internal" href="panda_nuc_setup.html"><span class="doc">Setting up NUC for Franka Panda</span></a>
<a class="reference internal" href="panda_ws_setup.html"><span class="doc">Setting up Workstation for Franka Panda</span></a></p>
<ol>
<li><p>To run a secured redis-server, add the path to your new conf file when you start it.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">redis</span><span class="o">-</span><span class="n">server</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">redis</span><span class="o">.</span><span class="n">conf</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="redis-cli">
<h2>redis-cli<a class="headerlink" href="#redis-cli" title="Permalink to this headline">¶</a></h2>
<p>Redis cli is an command line interface that makes it convenient to interact with a running redis-server. redis-cli is installed when you install redis.</p>
<p>To connect to a redis-server with redis-cli</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>```
redis-cli -h &lt;host ip&gt; -p &lt;port number&gt;
```
</pre></div>
</div>
<p>The host-ip for real robot control will usually be the NUC’s ip address, and port number is found in your config file.</p>
<div class="section" id="redis-cli-commands">
<h3>redis-cli commands<a class="headerlink" href="#redis-cli-commands" title="Permalink to this headline">¶</a></h3>
<p>For more information about redis-cli and commands see <a class="reference external" href="https://redis.io/topics/rediscli">this link</a>. The most relevant ones for perls2 are listed below:</p>
<ul>
<li><p>AUTH password : If you’ve secured your server, you won’t be able to use redis-cli without authenticating</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">AUTH</span> <span class="n">your</span><span class="o">-</span><span class="n">redis</span><span class="o">-</span><span class="n">server</span><span class="o">-</span><span class="n">password</span>
<span class="n">OK</span>
</pre></div>
</div>
</li>
<li><p>GET key: get the value of a key.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">get</span> <span class="n">franka_panda</span><span class="p">::</span><span class="n">control</span><span class="p">::</span><span class="n">tau</span>
</pre></div>
</div>
</li>
<li><p>SET key value : Set the value of a key</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="nb">set</span> <span class="n">franka_panda</span><span class="p">::</span><span class="n">control</span><span class="p">::</span><span class="n">mode</span> <span class="n">idle</span>
<span class="n">OK</span>
</pre></div>
</div>
</li>
<li><p>FLUSHALL : Flush all keys and values in the database. Use before starting the driver.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">FLUSHALL</span>
<span class="n">OK</span>
</pre></div>
</div>
</li>
<li><p>KEYS prefix : List all keys starting with prefix string</p>
<p>Example: list all keys.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">KEYS</span> <span class="o">*</span>
</pre></div>
</div>
</li>
<li><p>SHUTDOWN : shut down current redis-server.</p></li>
</ul>
</div>
</div>
<div class="section" id="troubleshooting">
<h2>Troubleshooting:<a class="headerlink" href="#troubleshooting" title="Permalink to this headline">¶</a></h2>
<div class="section" id="kill-a-persistent-redis-server">
<h3>Kill a persistent redis-server<a class="headerlink" href="#kill-a-persistent-redis-server" title="Permalink to this headline">¶</a></h3>
<p>Sometimes redis-servers will continue to run in the background, and you get errors saying that the port is already in use. You might notice a redis-server refuses to use the .conf file and remains unsecured.</p>
<p>This command can be used to kill a persistent server</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>**Stop redis-server**:
```
/etc/init.d/redis-server stop
```
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="sawyer_instructions.html" class="btn btn-neutral float-right" title="Using the Rethink Sawyer Arm" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="panda_instructions.html" class="btn btn-neutral float-left" title="Using the Franka Panda" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, StanfordVL

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>