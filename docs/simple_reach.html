

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Simple Reach Example &mdash; perls2 1.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Examples: Objects" href="source/load_objects.html" />
    <link rel="prev" title="Controllers" href="source/controller_eqns.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> perls2
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="source/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="source/panda_setup.html">Franka Panda Setup</a></li>
</ul>
<p class="caption"><span class="caption-text">Modules</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="source/environments.html">Environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="source/worlds.html">World</a></li>
<li class="toctree-l1"><a class="reference internal" href="source/robot_interfaces.html">RobotInterfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="source/controller_eqns.html">Controllers</a></li>
</ul>
<p class="caption"><span class="caption-text">Examples</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Simple Reach Example</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#description">Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="#run-file">Run file:</a></li>
<li class="toctree-l2"><a class="reference internal" href="#environment-file">Environment file:</a></li>
<li class="toctree-l2"><a class="reference internal" href="#config-file">Config file:</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#robot">robot</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sensors">sensors</a></li>
<li class="toctree-l3"><a class="reference internal" href="#objects">objects</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="source/load_objects.html">Examples: Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="source/switch_sim_real.html">Switching between Real and Sim Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="source/project_template.html">Project Template</a></li>
</ul>
<p class="caption"><span class="caption-text">API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="env.html">Environment (Env)</a></li>
<li class="toctree-l1"><a class="reference internal" href="world.html">World</a></li>
<li class="toctree-l1"><a class="reference internal" href="robot_interface.html">Robot Interfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="controller.html">Controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="object_interface.html">Object Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="camera_interface.html">Camera Interface</a></li>
</ul>
<p class="caption"><span class="caption-text">Real Robot Control</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="source/panda_setup.html">Franka Panda Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="source/panda_nuc_setup.html">Set up NUC (Control PC) for the Franka Panda</a></li>
<li class="toctree-l1"><a class="reference internal" href="source/panda_ws_setup.html">Set up workstation for Franka Panda</a></li>
<li class="toctree-l1"><a class="reference internal" href="source/panda_instructions.html">Using the Franka Panda</a></li>
<li class="toctree-l1"><a class="reference internal" href="source/redis.html">Redis Help</a></li>
<li class="toctree-l1"><a class="reference internal" href="source/sawyer_instructions.html">Using the Rethink Sawyer Arm</a></li>
<li class="toctree-l1"><a class="reference internal" href="source/demos.html">Controller Demos</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">perls2</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Simple Reach Example</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/simple_reach.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="simple-reach-example">
<h1>Simple Reach Example<a class="headerlink" href="#simple-reach-example" title="Permalink to this headline">¶</a></h1>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>The simple reach example is meant to demonstrate the basic components of a PERLS2 project. It also shows how perls2 streamlines getting a simulation with a robot up and running. This example only uses PyBullet.</p>
<p>There are three files worth examining for this demo:</p>
<ul class="simple">
<li><p>Config file: simple_reach.yaml</p></li>
<li><p>Environment file: simple_reach_env.py</p></li>
<li><p>Run file: run_simple_reach.py</p></li>
</ul>
</div>
<div class="section" id="run-file">
<h2>Run file:<a class="headerlink" href="#run-file" title="Permalink to this headline">¶</a></h2>
<p>The run file shows how an environment can be combined with a policy to run an experiment. The envrionment is defined using SimpleReachEnv and outputs observations, reward, termination and info. This is similar to the OpenAI.gym pattern. The observations at each step are given to a dummy policy described in <code class="docutils literal notranslate"><span class="pre">get_action(observation)</span></code> that uses the observation at the step to produce an action.</p>
<p>The Bullet Environment is initialized to use the visualizer by default, but this can be changed in the construction of the SimpleReachEnv.</p>
</div>
<div class="section" id="environment-file">
<h2>Environment file:<a class="headerlink" href="#environment-file" title="Permalink to this headline">¶</a></h2>
<p>The environment file contains code specific to managing the environment and describing the task. The main functions worth taking a look at are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">reset</span></code> : reset the environment after completion of the episode, randomization of object placements and sensor parameters happens here.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">step</span></code>: execute an action and step the environment forwards.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rewardFunction</span></code>: calculate the reward to be given to the agent based on the state of the environment.</p></li>
</ul>
<p>Some helper functions also exist to help organize your code:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">_exec_action</span></code> : how the environment should interpret and execute the action. In this example, the action is a delta between the current end effector position of the robot and some desired position. This is executed by setting the robots new position to its current position + this delta.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">get_observation</span></code>: the observation the environment should provide. Our dummy policy only uses the delta end effector position from the goal, but you can also get the current end_effector pose, and a rendered image at the step.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_check_termination</span></code>: returns whether or not the episode has completed, either by execeeding the maximum number of steps or if the goal has been acheived.</p></li>
</ul>
</div>
<div class="section" id="config-file">
<h2>Config file:<a class="headerlink" href="#config-file" title="Permalink to this headline">¶</a></h2>
<p>The configuration file contains the parameters that describes the robot, the sensors used and the objects it will interact with. The configuration file is broken up into a few components</p>
<div class="section" id="robot">
<h3>robot<a class="headerlink" href="#robot" title="Permalink to this headline">¶</a></h3>
<p>For right now, it is not advised to edit with the robot configuration as these describe the setup of the robot. Please see more advanced demos</p>
</div>
<div class="section" id="sensors">
<h3>sensors<a class="headerlink" href="#sensors" title="Permalink to this headline">¶</a></h3>
<p>These config parameters describe sensor behavior.  In this example, we only have a camera. You can try changing the properties in the intrinsics/extrinsics to see how they change the rendered images in bullet. These will show up on the left side of the rendered image.</p>
<p>TODO: add pictures highlighting rendered image</p>
<p>The configuration parameters also prescribe the randomization behavior of the camera. Under the <code class="docutils literal notranslate"><span class="pre">random</span></code> key there are a few keys of interest</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">randomize</span></code>: True/False to randomize all parameters upon reset.
The intrinsic and extrinsic parameters under this key all contain <code class="docutils literal notranslate"><span class="pre">lower</span></code> and <code class="docutils literal notranslate"><span class="pre">upper</span></code> keys that allow you to define the min and max range for randomization. For example</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">extrinsics:</span> <span class="pre">eye_position:</span> <span class="pre">lower:</span> <span class="pre">[0.3,</span> <span class="pre">0.,</span> <span class="pre">1.5]</span> <span class="pre">upper:</span> <span class="pre">[0.5,</span> <span class="pre">0.,</span> <span class="pre">2.0]</span></code></p>
<p>means that for the eye position extrinsic property (where the camera is located) the x position is bounded from [0.3, 0.5], y position is [0.0, 0.0] and z position is [1.5, 2.0]</p>
<p>You can modify these ranges to see how it changes the rendered image on reset.</p>
</div>
<div class="section" id="objects">
<h3>objects<a class="headerlink" href="#objects" title="Permalink to this headline">¶</a></h3>
<p>Object parameters define what type of object, where it is placed and if it can move. These can be modified in a similar manner to sensor parameters. Of particular interest is the <code class="docutils literal notranslate"><span class="pre">is_static</span></code> key, which determines if the object can move. The randomization parameters can be modified similarly to the sensor parameters.</p>
<p>Try modifying the is_static key and changing the type of object to see how the simulation changes.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="source/load_objects.html" class="btn btn-neutral float-right" title="Examples: Objects" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="source/controller_eqns.html" class="btn btn-neutral float-left" title="Controllers" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, StanfordVL

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>