"""Test script for redis_utils.py
"""

import perls2.utils.redis_utils as RU
import pytest
import numpy as np

def test_redis_state_to_np(): 
	state_str = "0.000125559134503359 0.000990025413722996 -0.000505009065291245 0.0027716119003343 0.00193538339277136 0.075633681715534 1.03529999095642"
	state_np = RU.franka_state_to_np(state_str)
	assert(state_np.shape == (7,))

def test_redis_state_to_np_mat():
	state_str = "1.37243179077682 0.0303098401746899 1.35593638500276 -0.0146822820059845 0.0173479147160189 -0.00126769964125797 -0.00414517617602964 0.0303098401746899 2.06766540614763 0.0241402874034015 -0.997500154723087 -0.0176547834430898 -0.123857981105795 -0.00145879120569034 1.35593638500276 0.0241402874034015 1.36904228873836 -0.0131312265850373 0.0170994836314575 -0.00107255945243665 -0.00410900449545804 -0.0146822820059845 -0.997500154723087 -0.0131312265850373 1.07031400826678 0.0243980317964721 0.166687043861745 0.00182397437507655 0.0173479147160189 -0.0176547834430898 0.0170994836314574 0.0243980317964721 0.0114169574657517 0.00222519688706938 7.43949949634922e-05 -0.00126769964125797 -0.123857981105795 -0.00107255945243665 0.166687043861745 0.00222519688706938 0.0482222181084137 0.00173273660855194 -0.00414517617602964 -0.00145879120569034 -0.00410900449545804 0.00182397437507655 7.43949949634922e-05 0.00173273660855194 0.00296417336813313"
	state_np = RU.franka_state_to_np_mat(state_str, (7,7))
	assert(state_np.shape == (7,7))